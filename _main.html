<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>åŸºäºRçš„æ–‡çŒ®å¤åˆ»ï¼šåˆ©ç”¨ä¸­å›½å¾®è§‚æ•°æ®åº“</title>
  <meta name="description" content="<p>This book written based on the data waranting using micro-database in China.</p>" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="åŸºäºRçš„æ–‡çŒ®å¤åˆ»ï¼šåˆ©ç”¨ä¸­å›½å¾®è§‚æ•°æ®åº“" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This book written based on the data waranting using micro-database in China.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="åŸºäºRçš„æ–‡çŒ®å¤åˆ»ï¼šåˆ©ç”¨ä¸­å›½å¾®è§‚æ•°æ®åº“" />
  
  <meta name="twitter:description" content="<p>This book written based on the data waranting using micro-database in China.</p>" />
  

<meta name="author" content="é»„å»ºç¥º" />


<meta name="date" content="2023-03-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">åŸºäºRçš„æ–‡çŒ®å¤åˆ»ï¼šåˆ©ç”¨ä¸­å›½å¾®è§‚æ•°æ®åº“</h1>
<p class="author"><em>é»„å»ºç¥º</em></p>
<p class="date"><em>2023-03-13</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#å‰è¨€" id="toc-å‰è¨€">å‰è¨€</a></li>
<li><a href="#åœŸåœ°æµè½¬ç ”ç©¶" id="toc-åœŸåœ°æµè½¬ç ”ç©¶"><span class="toc-section-number">1</span> åœŸåœ°æµè½¬ç ”ç©¶</a>
<ul>
<li><a href="#è½½å…¥åŒ…" id="toc-è½½å…¥åŒ…"><span class="toc-section-number">1.1</span> è½½å…¥åŒ…</a></li>
<li><a href="#å¯¼å…¥æ•°æ®" id="toc-å¯¼å…¥æ•°æ®"><span class="toc-section-number">1.2</span> å¯¼å…¥æ•°æ®</a></li>
<li><a href="#æŸ¥çœ‹å˜é‡æ ‡ç­¾" id="toc-æŸ¥çœ‹å˜é‡æ ‡ç­¾"><span class="toc-section-number">1.3</span> æŸ¥çœ‹å˜é‡æ ‡ç­¾</a></li>
<li><a href="#æ•°æ®è§„æ•´" id="toc-æ•°æ®è§„æ•´"><span class="toc-section-number">1.4</span> æ•°æ®è§„æ•´</a>
<ul>
<li><a href="#å†œä¸šç”Ÿäº§æ•ˆç‡" id="toc-å†œä¸šç”Ÿäº§æ•ˆç‡"><span class="toc-section-number">1.4.1</span> å†œä¸šç”Ÿäº§æ•ˆç‡</a></li>
<li><a href="#æµåŠ¨äººå£" id="toc-æµåŠ¨äººå£"><span class="toc-section-number">1.4.2</span> æµåŠ¨äººå£</a></li>
</ul></li>
<li><a href="#æ¨¡å‹å»ºç«‹" id="toc-æ¨¡å‹å»ºç«‹"><span class="toc-section-number">1.5</span> æ¨¡å‹å»ºç«‹</a></li>
</ul></li>
<li><a href="#æ–‡çŒ®å¤åˆ»åŠ³åŠ¨åŠ›æµåŠ¨å¦‚ä½•å½±å“å†œæˆ·å€Ÿè´·" id="toc-æ–‡çŒ®å¤åˆ»åŠ³åŠ¨åŠ›æµåŠ¨å¦‚ä½•å½±å“å†œæˆ·å€Ÿè´·"><span class="toc-section-number">2</span> æ–‡çŒ®å¤åˆ»ï¼šã€ŠåŠ³åŠ¨åŠ›æµåŠ¨å¦‚ä½•å½±å“å†œæˆ·å€Ÿè´·ã€‹</a>
<ul>
<li><a href="#æ–‡çŒ®å›é¡¾" id="toc-æ–‡çŒ®å›é¡¾"><span class="toc-section-number">2.1</span> æ–‡çŒ®å›é¡¾</a></li>
<li><a href="#æ•°æ®å¤„ç†" id="toc-æ•°æ®å¤„ç†"><span class="toc-section-number">2.2</span> æ•°æ®å¤„ç†</a></li>
<li><a href="#ç»Ÿè®¡æè¿°" id="toc-ç»Ÿè®¡æè¿°"><span class="toc-section-number">2.3</span> ç»Ÿè®¡æè¿°</a></li>
<li><a href="#æ¨¡å‹è®¾å®š" id="toc-æ¨¡å‹è®¾å®š"><span class="toc-section-number">2.4</span> æ¨¡å‹è®¾å®š</a></li>
</ul></li>
<li><a href="#culture" id="toc-culture"><span class="toc-section-number">3</span> å®—æ—æ–‡åŒ–</a>
<ul>
<li><a href="#æ•°æ®è½½å…¥" id="toc-æ•°æ®è½½å…¥"><span class="toc-section-number">3.1</span> æ•°æ®è½½å…¥</a></li>
<li><a href="#å¯è§†åŒ–" id="toc-å¯è§†åŒ–"><span class="toc-section-number">3.2</span> å¯è§†åŒ–</a></li>
<li><a href="#åœ°å›¾" id="toc-åœ°å›¾"><span class="toc-section-number">3.3</span> åœ°å›¾</a></li>
<li><a href="#å…¶ä»–æ•°æ®æº" id="toc-å…¶ä»–æ•°æ®æº"><span class="toc-section-number">3.4</span> å…¶ä»–æ•°æ®æº</a></li>
</ul></li>
<li><a href="#charls" id="toc-charls"><span class="toc-section-number">4</span> CHARLS</a>
<ul>
<li><a href="#æ•°æ®å¯¼å…¥" id="toc-æ•°æ®å¯¼å…¥"><span class="toc-section-number">4.1</span> æ•°æ®å¯¼å…¥</a></li>
</ul></li>
<li><a href="#æ–‡çŒ®å¤åˆ»æ–°å‹å†œæ‘ç¤¾ä¼šå…»è€ä¿é™©æ”¿ç­–æ•ˆæœè¯„ä¼°" id="toc-æ–‡çŒ®å¤åˆ»æ–°å‹å†œæ‘ç¤¾ä¼šå…»è€ä¿é™©æ”¿ç­–æ•ˆæœè¯„ä¼°"><span class="toc-section-number">5</span> æ–‡çŒ®å¤åˆ»ï¼šã€Šæ–°å‹å†œæ‘ç¤¾ä¼šå…»è€ä¿é™©æ”¿ç­–æ•ˆæœè¯„ä¼°ã€‹</a>
<ul>
<li><a href="#æ•°æ®å¯¼å…¥-1" id="toc-æ•°æ®å¯¼å…¥-1"><span class="toc-section-number">5.1</span> æ•°æ®å¯¼å…¥</a></li>
</ul></li>
<li><a href="#chfs" id="toc-chfs"><span class="toc-section-number">6</span> CHFS</a>
<ul>
<li><a href="#æ•°æ®" id="toc-æ•°æ®"><span class="toc-section-number">6.1</span> æ•°æ®</a></li>
</ul></li>
<li><a href="#å‚è€ƒæ–‡çŒ®" id="toc-å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</a></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">åŸºäºRçš„æ–‡çŒ®å¤åˆ»ï¼šåˆ©ç”¨ä¸­å›½å¾®è§‚æ•°æ®åº“</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="å‰è¨€" class="section level1 unnumbered hasAnchor">
<h1 class="unnumbered hasAnchor">å‰è¨€<a href="#å‰è¨€" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Placeholder</p>
<!--chapter:end:index.Rmd-->
</div>
<div id="åœŸåœ°æµè½¬ç ”ç©¶" class="section level1 hasAnchor" number="1">
<h1 class="hasAnchor"><span class="header-section-number">1</span> åœŸåœ°æµè½¬ç ”ç©¶<a href="#åœŸåœ°æµè½¬ç ”ç©¶" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>æ•°æ®æ¥æºï¼š<a href="http://www.isss.pku.edu.cn/cfps/index.htm">CFPS</a></p>
<p>æœ¬ç« ä¸»è¦å‚è€ƒå››å·å¸ˆèŒƒå¤§å­¦ç‹æ•æ°è€å¸ˆçš„<a href="https://bookdown.org/wangminjie/R4cfps/land.html">ç ”ç©¶ç¬”è®°</a></p>
<div id="è½½å…¥åŒ…" class="section level2 hasAnchor" number="1.1">
<h2 class="hasAnchor"><span class="header-section-number">1.1</span> è½½å…¥åŒ…<a href="#è½½å…¥åŒ…" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€
## âœ” forcats   1.0.0     âœ” stringr   1.5.0
## âœ” lubridate 1.9.2     âœ” tibble    3.2.0
## âœ” purrr     1.0.1     âœ” tidyr     1.3.0
## âœ” readr     2.1.4     
## â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
## âœ– stats::filter() masks dplyr::filter()
## âœ– stats::lag()    masks dplyr::lag()
## â„¹ Use the ]8;;http://conflicted.r-lib.org/conflicted package]8;; to force all conflicts to become errors</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span></code></pre></div>
</div>
<div id="å¯¼å…¥æ•°æ®" class="section level2 hasAnchor" number="1.2">
<h2 class="hasAnchor"><span class="header-section-number">1.2</span> å¯¼å…¥æ•°æ®<a href="#å¯¼å…¥æ•°æ®" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;data/cfps/2010/cfps2010famecon_202008.dta&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fid,urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 14,797
## Columns: 8
## $ fid       &lt;dbl+lbl&gt; 110001, 110003, 110005, 110006, 110007, 110009, 110010, â€¦
## $ urban     &lt;dbl+lbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,â€¦
## $ fk201_a_1 &lt;dbl+lbl&gt; -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, â€¦
## $ fk201_a_2 &lt;dbl+lbl&gt; -8.0, -8.0, -8.0, -8.0,  2.5, -8.0, -8.0, -8.0, -8.0, -8â€¦
## $ fk201_a_3 &lt;dbl+lbl&gt; -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, â€¦
## $ fk201_a_4 &lt;dbl+lbl&gt; -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, â€¦
## $ fk201_a_5 &lt;dbl+lbl&gt; -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, â€¦
## $ fk201_a_6 &lt;dbl+lbl&gt; -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, â€¦</code></pre>
</div>
<div id="æŸ¥çœ‹å˜é‡æ ‡ç­¾" class="section level2 hasAnchor" number="1.3">
<h2 class="hasAnchor"><span class="header-section-number">1.3</span> æŸ¥çœ‹å˜é‡æ ‡ç­¾<a href="#æŸ¥çœ‹å˜é‡æ ‡ç­¾" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>å¯¹äºåŸæœ‰æ•°æ®ï¼Œéƒ½æ˜¯å­˜åœ¨ä¸€ä¸ªæ ‡ç­¾æ¥æ˜¾ç¤ºåŸå§‹çš„é—®é¢˜å½¢å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å…ˆæŸ¥çœ‹æˆ‘ä»¬æƒ³è¦æ‰¾çš„é—®é¢˜çš„æ ‡ç­¾æ˜¯å¦å¯¹åº”ã€‚å…ˆåˆ›å»ºä¸€ä¸ª<code>get_var_label</code>çš„å‡½æ•°ã€‚</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>get_var_label <span class="ot">&lt;-</span> <span class="cf">function</span>(dta) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  labels <span class="ot">&lt;-</span> <span class="fu">map</span>(dta, <span class="cf">function</span>(x) <span class="fu">attr</span>(x, <span class="st">&quot;label&quot;</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data_frame</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">names</span>(labels),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">as.character</span>(labels)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>æ ¹æ®è§‚å¯ŸåŸæœ‰æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯çŸ¥é“<code>fk201_a_n</code>çš„å˜é‡éƒ½æ˜¯æ‹¥æœ‰çš„å†œä¸šèµ„äº§ï¼Œ<code>fk202_a_n</code>ã€<code>fk203_a_n</code>å’Œ<code>fk204_a_n</code>åˆ†åˆ«æ˜¯ç»è¥ã€è½¬ç§Ÿå…¥å’Œè½¬ç§Ÿå‡ºå¤šå°‘å†œä¸šèµ„äº§ã€‚</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_var_label</span>()</span></code></pre></div>
<pre><code>## Warning: `data_frame()` was deprecated in tibble 1.1.0.
## â„¹ Please use `tibble()` instead.</code></pre>
<pre><code>## # A tibble: 7 Ã— 2
##   name      label                           
##   &lt;chr&gt;     &lt;chr&gt;                           
## 1 urban     åŸºäºå›½å®¶ç»Ÿè®¡å±€èµ„æ–™çš„åŸä¹¡åˆ†ç±»å˜é‡
## 2 fk201_a_1 æ‚¨å®¶æ‹¥æœ‰å¤šå°‘äº©æ°´ç”°              
## 3 fk201_a_2 æ‚¨å®¶æ‹¥æœ‰å¤šå°‘äº©æ—±åœ°              
## 4 fk201_a_3 æ‚¨å®¶æ‹¥æœ‰å¤šå°‘äº©æ—åœ°              
## 5 fk201_a_4 æ‚¨å®¶æ‹¥æœ‰å¤šå°‘äº©æœå›­              
## 6 fk201_a_5 æ‚¨å®¶æ‹¥æœ‰å¤šå°‘äº©è‰åœº              
## 7 fk201_a_6 æ‚¨å®¶æ‹¥æœ‰å¤šå°‘äº©æ± å¡˜</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">count</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> .x), x))</span></code></pre></div>
<pre><code>## $urban
##   x    n
## 1 0 7694
## 2 1 7103
## 
## $fk201_a_1
##         x     n
## 1    -8.0 11656
## 2    -1.0     3
## 3     0.0    20
## 4     0.1     6
## 5     0.2    14
## 6     0.3    36
## 7     0.4    36
## 8     0.5    74
## 9     0.6    54
## 10    0.7    49
## 11    0.8    52
## 12    0.9    14
## 13    1.0   346
## 14    1.1    18
## 15    1.2    61
## 16    1.3    27
## 17    1.4    27
## 18    1.5   144
## 19    1.6    28
## 20    1.7    24
## 21    1.8    45
## 22    1.9    14
## 23    2.0   462
## 24    2.1    15
## 25    2.2    17
## 26    2.3    20
## 27    2.4    32
## 28    2.5    94
## 29    2.6    15
## 30    2.7    23
## 31    2.8    25
## 32    2.9     5
## 33    3.0   326
## 34    3.1     3
## 35    3.2    17
## 36    3.3     9
## 37    3.4    10
## 38    3.5    48
## 39    3.6    17
## 40    3.7     5
## 41    3.8    11
## 42    3.9     2
## 43    4.0   228
## 44    4.1     4
## 45    4.2    10
## 46    4.3     6
## 47    4.4     9
## 48    4.5    22
## 49    4.6     2
## 50    4.7     3
## 51    4.8     4
## 52    4.9     1
## 53    5.0   143
## 54    5.2     3
## 55    5.3     1
## 56    5.4     6
## 57    5.5    14
## 58    5.6     1
## 59    5.7     4
## 60    5.8     1
## 61    6.0    96
## 62    6.1     1
## 63    6.3     1
## 64    6.5     9
## 65    6.6     4
## 66    7.0    53
## 67    7.2     2
## 68    7.3     1
## 69    7.4     1
## 70    7.5     4
## 71    7.6     1
## 72    7.8     2
## 73    7.9     1
## 74    8.0    69
## 75    8.1     2
## 76    8.3     1
## 77    8.4     2
## 78    8.5     2
## 79    8.8     1
## 80    9.0    19
## 81   10.0    48
## 82   10.2     1
## 83   10.5     1
## 84   10.8     3
## 85   11.0    15
## 86   11.5     1
## 87   11.6     1
## 88   11.7     1
## 89   12.0    19
## 90   12.6     2
## 91   13.0     7
## 92   13.2     1
## 93   13.5     1
## 94   14.0     4
## 95   14.5     1
## 96   15.0    14
## 97   15.4     1
## 98   16.0     6
## 99   16.4     1
## 100  17.0     1
## 101  18.0     2
## 102  19.0     2
## 103  20.0     5
## 104  21.0     2
## 105  22.0     1
## 106  24.0     4
## 107  25.0     3
## 108  26.0     2
## 109  30.0     2
## 110  37.0     1
## 111  40.0     2
## 112  60.0     2
## 113  63.0     1
## 114 122.0     1
## 
## $fk201_a_2
##         x    n
## 1    -8.0 8552
## 2    -1.0   12
## 3     0.0   42
## 4     0.1   31
## 5     0.2   67
## 6     0.3   74
## 7     0.4   39
## 8     0.5  178
## 9     0.6   64
## 10    0.7   50
## 11    0.8   47
## 12    0.9   11
## 13    1.0  503
## 14    1.1   10
## 15    1.2   45
## 16    1.3   19
## 17    1.4   26
## 18    1.5  132
## 19    1.6   27
## 20    1.7   16
## 21    1.8   33
## 22    1.9    4
## 23    2.0  542
## 24    2.1   12
## 25    2.2   18
## 26    2.3   11
## 27    2.4   17
## 28    2.5   96
## 29    2.6    7
## 30    2.7   13
## 31    2.8   23
## 32    2.9    3
## 33    3.0  479
## 34    3.1    2
## 35    3.2   22
## 36    3.3   13
## 37    3.4   17
## 38    3.5   44
## 39    3.6   27
## 40    3.7   10
## 41    3.8   12
## 42    3.9    7
## 43    4.0  384
## 44    4.1    5
## 45    4.2   17
## 46    4.3    3
## 47    4.4    9
## 48    4.5   70
## 49    4.6    4
## 50    4.7    8
## 51    4.8   16
## 52    4.9    3
## 53    5.0  357
## 54    5.1    1
## 55    5.2    8
## 56    5.3    5
## 57    5.4   12
## 58    5.5   20
## 59    5.6   14
## 60    5.7    5
## 61    5.8    4
## 62    5.9    2
## 63    6.0  337
## 64    6.1    2
## 65    6.2    5
## 66    6.3    5
## 67    6.4   11
## 68    6.5   17
## 69    6.6    4
## 70    6.7    4
## 71    6.8    9
## 72    6.9    3
## 73    7.0  220
## 74    7.2   11
## 75    7.3    1
## 76    7.4    5
## 77    7.5   23
## 78    7.6    5
## 79    7.7    5
## 80    7.8   15
## 81    8.0  220
## 82    8.1    5
## 83    8.2    5
## 84    8.4    7
## 85    8.5   13
## 86    8.6    1
## 87    8.7    3
## 88    8.8    8
## 89    9.0  128
## 90    9.2    4
## 91    9.3    1
## 92    9.4    3
## 93    9.5   10
## 94    9.6   10
## 95    9.7    2
## 96    9.8    3
## 97    9.9    1
## 98   10.0  291
## 99   10.4    1
## 100  10.5    6
## 101  10.6    1
## 102  10.7    1
## 103  10.8    6
## 104  11.0   73
## 105  11.2    1
## 106  11.3    1
## 107  11.5   11
## 108  11.6    1
## 109  11.7    2
## 110  11.8    4
## 111  11.9    1
## 112  12.0  162
## 113  12.4    1
## 114  12.5    7
## 115  12.6    1
## 116  12.7    1
## 117  12.8    2
## 118  13.0   67
## 119  13.2    2
## 120  13.5    2
## 121  13.7    1
## 122  13.8    3
## 123  14.0   65
## 124  14.1    1
## 125  14.5    2
## 126  14.7    1
## 127  14.8    1
## 128  14.9    1
## 129  15.0  116
## 130  15.2    1
## 131  15.3    1
## 132  15.4    1
## 133  15.5    1
## 134  15.6    3
## 135  15.7    1
## 136  16.0   57
## 137  16.8    1
## 138  16.9    2
## 139  17.0   32
## 140  17.2    1
## 141  17.4    2
## 142  17.5    3
## 143  17.6    1
## 144  17.9    1
## 145  18.0   46
## 146  18.1    1
## 147  18.5    2
## 148  18.6    1
## 149  18.7    1
## 150  19.0   12
## 151  19.2    1
## 152  19.5    1
## 153  20.0  123
## 154  20.2    1
## 155  20.8    1
## 156  21.0   20
## 157  21.5    2
## 158  22.0   25
## 159  22.4    1
## 160  22.5    1
## 161  23.0   17
## 162  24.0   22
## 163  25.0   25
## 164  25.7    1
## 165  26.0    7
## 166  26.9    1
## 167  27.0    7
## 168  27.5    1
## 169  28.0    9
## 170  29.0    5
## 171  29.9    1
## 172  30.0   45
## 173  31.6    1
## 174  32.0    4
## 175  33.0    3
## 176  33.2    1
## 177  33.5    1
## 178  34.0    1
## 179  34.1    1
## 180  34.4    1
## 181  34.5    1
## 182  35.0    6
## 183  35.9    1
## 184  36.0    4
## 185  40.0   14
## 186  45.0    2
## 187  47.0    2
## 188  50.0    5
## 189  52.0    1
## 190  55.0    1
## 191  56.0    1
## 192  60.0    4
## 193  70.0    1
## 194  90.0    1
## 195 100.0    3
## 196 160.0    1
## 197 200.0    1
## 198 225.0    1
## 
## $fk201_a_3
##          x     n
## 1     -8.0 13699
## 2     -1.0     5
## 3      0.0    13
## 4      0.1    10
## 5      0.2    10
## 6      0.3    17
## 7      0.4     6
## 8      0.5    30
## 9      0.6     6
## 10     0.7     6
## 11     0.8    12
## 12     0.9     1
## 13     1.0   143
## 14     1.1     2
## 15     1.2     3
## 16     1.3     2
## 17     1.4     4
## 18     1.5    23
## 19     1.6     4
## 20     1.7     1
## 21     1.8     3
## 22     2.0   103
## 23     2.1     1
## 24     2.3     1
## 25     2.4     4
## 26     2.5     7
## 27     2.6     1
## 28     2.7     2
## 29     2.8     2
## 30     3.0   119
## 31     3.1     1
## 32     3.2     1
## 33     3.4     1
## 34     3.5     1
## 35     3.6     1
## 36     3.7     1
## 37     3.8     2
## 38     3.9     1
## 39     4.0    54
## 40     4.3     1
## 41     4.4     1
## 42     4.5     3
## 43     4.8     2
## 44     5.0    61
## 45     5.2     1
## 46     5.3     1
## 47     6.0    33
## 48     6.4     2
## 49     7.0    25
## 50     7.2     1
## 51     7.5     6
## 52     7.8     1
## 53     8.0    28
## 54     8.1     1
## 55     8.3     1
## 56     8.5     1
## 57     9.0     8
## 58     9.6     1
## 59    10.0    61
## 60    10.3     1
## 61    11.0     4
## 62    11.2     1
## 63    11.5     2
## 64    11.7     1
## 65    12.0    13
## 66    13.0     5
## 67    13.5     1
## 68    14.0     6
## 69    14.7     1
## 70    15.0    24
## 71    16.0     4
## 72    16.5     1
## 73    16.8     1
## 74    17.0     1
## 75    17.5     1
## 76    18.0     1
## 77    19.0     3
## 78    20.0    40
## 79    21.0     3
## 80    22.0     4
## 81    22.9     1
## 82    23.0     2
## 83    24.0     4
## 84    25.0     4
## 85    26.0     1
## 86    27.0     2
## 87    27.4     1
## 88    29.0     1
## 89    30.0    31
## 90    34.0     1
## 91    35.0     5
## 92    36.0     1
## 93    40.0    10
## 94    41.0     1
## 95    44.0     1
## 96    45.0     2
## 97    49.7     1
## 98    50.0    18
## 99    53.0     1
## 100   56.0     1
## 101   60.0    10
## 102   68.0     1
## 103   70.0     6
## 104   75.0     1
## 105   80.0     8
## 106   90.0     2
## 107  100.0     7
## 108  102.0     1
## 109  120.0     1
## 110  150.0     2
## 111  160.0     1
## 112  200.0     3
## 113  300.0     1
## 114  370.0     1
## 115 1000.0     3
## 
## $fk201_a_4
##        x     n
## 1   -8.0 14151
## 2   -1.0     6
## 3    0.0    19
## 4    0.1     6
## 5    0.2     9
## 6    0.3    10
## 7    0.4     4
## 8    0.5    33
## 9    0.6     2
## 10   0.7     4
## 11   0.8     6
## 12   0.9     2
## 13   1.0   108
## 14   1.1     1
## 15   1.2     4
## 16   1.4     1
## 17   1.5    23
## 18   1.6     4
## 19   1.7     3
## 20   1.8     3
## 21   2.0   102
## 22   2.3     1
## 23   2.4     1
## 24   2.5     9
## 25   2.7     4
## 26   2.8     2
## 27   3.0    76
## 28   3.2     1
## 29   3.5     6
## 30   3.6     1
## 31   3.7     4
## 32   3.8     1
## 33   3.9     1
## 34   4.0    53
## 35   4.2     1
## 36   4.5     6
## 37   4.8     1
## 38   5.0    27
## 39   5.1     1
## 40   5.3     1
## 41   5.5     2
## 42   6.0    26
## 43   7.0    10
## 44   7.4     1
## 45   8.0    10
## 46  10.0    24
## 47  12.0     4
## 48  15.0     3
## 49  20.0     7
## 50  21.0     1
## 51  25.0     1
## 52  30.0     1
## 53  32.0     1
## 54  35.0     1
## 55  40.0     2
## 56  50.0     2
## 57  80.0     1
## 58 100.0     1
## 59 400.0     1
## 
## $fk201_a_5
##      x     n
## 1 -8.0 14789
## 2  1.0     4
## 3  2.0     2
## 4  3.0     1
## 5  3.3     1
## 
## $fk201_a_6
##       x     n
## 1  -8.0 14706
## 2   0.0    10
## 3   0.1     1
## 4   0.2     3
## 5   0.3     3
## 6   0.4     1
## 7   0.5     7
## 8   0.6     1
## 9   0.7     1
## 10  0.8     2
## 11  1.0     9
## 12  1.5     2
## 13  1.6     1
## 14  2.0     7
## 15  2.5     1
## 16  3.0     5
## 17  4.0     2
## 18  4.7     1
## 19  5.0     4
## 20  6.0     5
## 21  6.3     1
## 22  7.0     1
## 23  8.4     1
## 24 13.0     2
## 25 14.0     1
## 26 16.0     1
## 27 20.0     4
## 28 22.0     2
## 29 23.0     2
## 30 24.0     1
## 31 25.0     3
## 32 30.0     1
## 33 33.0     1
## 34 38.0     1
## 35 50.0     2
## 36 63.0     1</code></pre>
<p>è¿™é‡Œä½¿ç”¨äº†<code>map</code>å‡½æ•°æ¥æ„å»ºä¸€ä¸ªæ˜ å°„ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªç´¯åŠ æ±‚å’Œï¼Œç¬¬ä¸€å¼ è¡¨æ˜¯å†œä¸šæˆ·å£å’ŒåŸé•‡æˆ·å£çš„æ•°é‡å¯¹æ¯”ï¼Œåé¢çš„è¡¨éƒ½æ˜¯å¯†åº¦åˆ†å¸ƒã€‚</p>
</div>
<div id="æ•°æ®è§„æ•´" class="section level2 hasAnchor" number="1.4">
<h2 class="hasAnchor"><span class="header-section-number">1.4</span> æ•°æ®è§„æ•´<a href="#æ•°æ®è§„æ•´" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">miss_var_summary</span>()</span></code></pre></div>
<pre><code>## # A tibble: 7 Ã— 3
##   variable  n_miss pct_miss
##   &lt;chr&gt;      &lt;int&gt;    &lt;dbl&gt;
## 1 urban          0        0
## 2 fk201_a_1      0        0
## 3 fk201_a_2      0        0
## 4 fk201_a_3      0        0
## 5 fk201_a_4      0        0
## 6 fk201_a_5      0        0
## 7 fk201_a_6      0        0</code></pre>
<p>åŸºæœ¬ä¸Šæ˜¯æ²¡æœ‰ç¼ºå¤±æ•°æ®ã€‚</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vis_dat</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>ä¸ºé˜²æ­¢åŒ…ä¹‹é—´çš„å‡½æ•°å†²çªï¼Œä½¿ç”¨<code>conflicted</code>æ¥preferåˆ°<code>dplyr</code>ä¸­çš„<code>filter</code>ã€‚</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(conflicted)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">&quot;filter&quot;</span>, <span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<pre><code>## [conflicted] Will prefer dplyr::filter over any other package.</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk2_s&quot;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(urban <span class="sc">==</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7,694 Ã— 6
##    urban     fk2_s_1     fk2_s_2     fk2_s_3     fk2_s_4     fk2_s_5    
##    &lt;dbl+lbl&gt; &lt;dbl+lbl&gt;   &lt;dbl+lbl&gt;   &lt;dbl+lbl&gt;   &lt;dbl+lbl&gt;   &lt;dbl+lbl&gt;  
##  1 0 [ä¹¡æ‘]   4 [æœå›­]   -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  2 0 [ä¹¡æ‘]   2 [æ—±åœ°]   -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  3 0 [ä¹¡æ‘]   4 [æœå›­]   -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  4 0 [ä¹¡æ‘]   4 [æœå›­]   -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  5 0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  6 0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  7 0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  8 0 [ä¹¡æ‘]   6 [æ± å¡˜]   -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
##  9 0 [ä¹¡æ‘]   4 [æœå›­]   -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
## 10 0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚ç”¨]
## # â€¦ with 7,684 more rows</code></pre>
<p>å…ˆæ‰¾å‡ºæœ‰ç»è¥åœŸåœ°çš„å®¶æˆ·ï¼šå¹¶ä¸è€ƒè™‘æ˜¯å¦æ˜¯è‡ªå·±æ‹¥æœ‰è¿˜æ˜¯è½¬ç§Ÿå…¥ã€‚</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fid,urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)), <span class="fu">any_vars</span>(. <span class="sc">&gt;</span> <span class="dv">0</span>))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## # A tibble: 7,688 Ã— 8
##    fid       urban     fk201_a_1   fk201_a_2 fk201_â€¦Â¹ fk201_â€¦Â² fk201_â€¦Â³ fk201_â€¦â´
##    &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt;   &lt;dbl+lbl&gt; &lt;dbl+lb&gt; &lt;dbl+lb&gt; &lt;dbl+lb&gt; &lt;dbl+lb&gt;
##  1 110007    1 [åŸé•‡]  -8 [ä¸é€‚ç”¨]  2.5    â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  2 120033    1 [åŸé•‡]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦  0.900 â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  3 120073    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦  5.10  â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  4 120074    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨]  1.80   â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  5 120076    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦  6     â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  6 120080    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ 38     â€¦
##  7 120081    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦  4     â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  8 120084    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦  1.5   â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
##  9 120087    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨] -8 [ä¸é€‚â€¦ -8 [ä¸â€¦  3     â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
## 10 120088    0 [ä¹¡æ‘]  -8 [ä¸é€‚ç”¨]  1.5    â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦ -8 [ä¸â€¦
## # â€¦ with 7,678 more rows, and abbreviated variable names Â¹â€‹fk201_a_3,
## #   Â²â€‹fk201_a_4, Â³â€‹fk201_a_5, â´â€‹fk201_a_6</code></pre>
<p>å†å°†è´Ÿå€¼è½¬å˜ä¸º0ã€‚</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">%&gt;%</span> <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)), <span class="fu">funs</span>(<span class="fu">replace</span>(., . <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>)))</span></code></pre></div>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## â„¹ Please use a list of either functions or lambdas:
## 
## # Simple named list: list(mean = mean, median = median)
## 
## # Auto named with `tibble::lst()`: tibble::lst(mean, median)
## 
## # Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<pre><code>## # A tibble: 7,688 Ã— 8
##    fid       urban     fk201_a_1 fk201_a_2 fk201_a_3 fk201_a_4 fk201_a_5 fk201â€¦Â¹
##    &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; &lt;dbl+l&gt;
##  1 110007    1 [åŸé•‡]  0         2.5       0         0         0          0     
##  2 120033    1 [åŸé•‡]  0         0         0         0.900     0          0     
##  3 120073    0 [ä¹¡æ‘]  0         0         0         5.10      0          0     
##  4 120074    0 [ä¹¡æ‘]  0         1.80      0         0         0          0     
##  5 120076    0 [ä¹¡æ‘]  0         0         0         6         0          0     
##  6 120080    0 [ä¹¡æ‘]  0         0         0         0         0         38     
##  7 120081    0 [ä¹¡æ‘]  0         0         0         4         0          0     
##  8 120084    0 [ä¹¡æ‘]  0         0         0         1.5       0          0     
##  9 120087    0 [ä¹¡æ‘]  0         0         0         3         0          0     
## 10 120088    0 [ä¹¡æ‘]  0         1.5       0         0         0          0     
## # â€¦ with 7,678 more rows, and abbreviated variable name Â¹â€‹fk201_a_6</code></pre>
<div id="å†œä¸šç”Ÿäº§æ•ˆç‡" class="section level3 hasAnchor" number="1.4.1">
<h3 class="hasAnchor"><span class="header-section-number">1.4.1</span> å†œä¸šç”Ÿäº§æ•ˆç‡<a href="#å†œä¸šç”Ÿäº§æ•ˆç‡" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> cfps2010family <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fid,urban, <span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>),fk3,fk4,fe1)<span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">revenue =</span> fk3<span class="sc">-</span>fk4)<span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;fk201_a&quot;</span>)), <span class="fu">funs</span>(<span class="fu">replace</span>(., . <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="st">&quot;revenue&quot;</span>), <span class="fu">funs</span>(<span class="fu">replace</span>(., . <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(revenue<span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## â„¹ Please use a list of either functions or lambdas:
## 
## # Simple named list: list(mean = mean, median = median)
## 
## # Auto named with `tibble::lst()`: tibble::lst(mean, median)
## 
## # Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## â„¹ Please use a list of either functions or lambdas:
## 
## # Simple named list: list(mean = mean, median = median)
## 
## # Auto named with `tibble::lst()`: tibble::lst(mean, median)
## 
## # Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## # A tibble: 6,093 Ã— 12
##    fid       urban   fk201â€¦Â¹ fk201â€¦Â² fk201â€¦Â³ fk201â€¦â´ fk201â€¦âµ fk201â€¦â¶ fk3   fk4  
##    &lt;dbl+lbl&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 110007    1 [åŸâ€¦ 0       2.5     0       0       0       0        1800   500
##  2 120033    1 [åŸâ€¦ 0       0       0       0.900   0       0       16000  1500
##  3 120074    0 [ä¹¡â€¦ 0       1.80    0       0       0       0        2100   900
##  4 120075    0 [ä¹¡â€¦ 0       0       0       0       0       0       15000  5500
##  5 120076    0 [ä¹¡â€¦ 0       0       0       6       0       0       30000 12000
##  6 120081    0 [ä¹¡â€¦ 0       0       0       4       0       0       32000  6000
##  7 120084    0 [ä¹¡â€¦ 0       0       0       1.5     0       0        7000  4000
##  8 120087    0 [ä¹¡â€¦ 0       0       0       3       0       0       25000  5000
##  9 120088    0 [ä¹¡â€¦ 0       1.5     0       0       0       0        5300   300
## 10 120090    0 [ä¹¡â€¦ 0       0       0       4.5     0       0       26000  6000
## # â€¦ with 6,083 more rows, 2 more variables: fe1 &lt;dbl+lbl&gt;, revenue &lt;dbl&gt;, and
## #   abbreviated variable names Â¹â€‹fk201_a_1, Â²â€‹fk201_a_2, Â³â€‹fk201_a_3, â´â€‹fk201_a_4,
## #   âµâ€‹fk201_a_5, â¶â€‹fk201_a_6</code></pre>
<p>ä¸€ä¸ªæœ‰æ•ˆçš„å»ºè®®æ˜¯åœ¨å¯¹åŸå§‹æ•°æ®è¿›è¡Œæ“ä½œæ—¶å€™ï¼Œå°½é‡ä¿è¯åŸå§‹æ•°æ®çš„ä¸å˜ï¼Œå†é€šè¿‡<code>%&gt;%</code>è¿›è¡Œä¼ å¯¼åˆ°æ–°çš„æ•°æ®æ¡†ä¸­ã€‚</p>
<p>æˆ‘ä»¬è®¡ç®—å†œä¸šç”Ÿäº§æ•ˆç‡çš„æ–¹æ³•æœ‰å¾ˆå¤šè¿™é‡Œä¸»è¦å‚è€ƒçš„æ˜¯ä¸€äº›ä¸»æµçš„åšæ³•ï¼šå°†å•ä½é¢ç§¯çº¯åˆ©æ¶¦ä½œä¸ºæ•ˆç‡çš„è¡¡é‡æŒ‡æ ‡</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">landsum =</span> <span class="fu">rowSums</span>(.[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>]))<span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(landsum<span class="sc">&gt;</span><span class="dv">0</span>)<span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rates =</span> revenue<span class="sc">/</span>landsum)<span class="ot">-&gt;</span>a1</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>a1</span></code></pre></div>
<pre><code>## # A tibble: 6,048 Ã— 14
##    fid       urban   fk201â€¦Â¹ fk201â€¦Â² fk201â€¦Â³ fk201â€¦â´ fk201â€¦âµ fk201â€¦â¶ fk3   fk4  
##    &lt;dbl+lbl&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 110007    1 [åŸâ€¦ 0       2.5     0       0       0       0        1800   500
##  2 120033    1 [åŸâ€¦ 0       0       0       0.900   0       0       16000  1500
##  3 120074    0 [ä¹¡â€¦ 0       1.80    0       0       0       0        2100   900
##  4 120076    0 [ä¹¡â€¦ 0       0       0       6       0       0       30000 12000
##  5 120081    0 [ä¹¡â€¦ 0       0       0       4       0       0       32000  6000
##  6 120084    0 [ä¹¡â€¦ 0       0       0       1.5     0       0        7000  4000
##  7 120087    0 [ä¹¡â€¦ 0       0       0       3       0       0       25000  5000
##  8 120088    0 [ä¹¡â€¦ 0       1.5     0       0       0       0        5300   300
##  9 120090    0 [ä¹¡â€¦ 0       0       0       4.5     0       0       26000  6000
## 10 120091    0 [ä¹¡â€¦ 0       0       0       4       0       0       30000  5000
## # â€¦ with 6,038 more rows, 4 more variables: fe1 &lt;dbl+lbl&gt;, revenue &lt;dbl&gt;,
## #   landsum &lt;dbl&gt;, rates &lt;dbl&gt;, and abbreviated variable names Â¹â€‹fk201_a_1,
## #   Â²â€‹fk201_a_2, Â³â€‹fk201_a_3, â´â€‹fk201_a_4, âµâ€‹fk201_a_5, â¶â€‹fk201_a_6</code></pre>
</div>
<div id="æµåŠ¨äººå£" class="section level3 hasAnchor" number="1.4.2">
<h3 class="hasAnchor"><span class="header-section-number">1.4.2</span> æµåŠ¨äººå£<a href="#æµåŠ¨äººå£" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>æˆ‘ä»¬å¯ä»¥ç”¨å¤–å‡ºæ‰“å·¥åœ¨å®¶åº­äººå£ä¸­çš„å æ¯”æ¥æµ‹ç®—æµåŠ¨ç‡ã€‚</p>
<p><img src="image/fe1.png" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(conflicted)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">&#39;filter&#39;</span>,<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<pre><code>## [conflicted] Removing existing preference.
## [conflicted] Will prefer dplyr::filter over any other package.</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>a1<span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fe1<span class="sc">!=</span><span class="dv">5</span>)<span class="ot">-&gt;</span>a2</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>a2<span class="sc">$</span>fe1[a2<span class="sc">$</span>fe1<span class="sc">==</span><span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>a2<span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rates,fe1)</span></code></pre></div>
<pre><code>## # A tibble: 6,017 Ã— 2
##    rates fe1      
##    &lt;dbl&gt; &lt;dbl+lbl&gt;
##  1  371. 0        
##  2 7632. 0        
##  3  667. 0        
##  4 3000  1 [æœ‰]   
##  5 6500  0        
##  6 2000  0        
##  7 6667. 0        
##  8 3333. 0        
##  9 4444. 0        
## 10 6250  0        
## # â€¦ with 6,007 more rows</code></pre>
</div>
</div>
<div id="æ¨¡å‹å»ºç«‹" class="section level2 hasAnchor" number="1.5">
<h2 class="hasAnchor"><span class="header-section-number">1.5</span> æ¨¡å‹å»ºç«‹<a href="#æ¨¡å‹å»ºç«‹" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>æˆ‘ä»¬è¯•å›¾è€ƒå¯Ÿå…³äºæµåŠ¨äººå£ä¸å†œä¸šç”Ÿäº§æ•ˆç‡ä¹‹é—´çš„å…³ç³»ï¼š</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>reg <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> a2,fe1<span class="sc">~</span>rates)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reg)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = fe1 ~ rates, data = a2)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.3873 -0.3869 -0.3862  0.6130  0.9042 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  3.873e-01  6.329e-03    61.2   &lt;2e-16 ***
## rates       -8.330e-07  6.409e-07    -1.3    0.194    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4869 on 6015 degrees of freedom
## Multiple R-squared:  0.0002807,  Adjusted R-squared:  0.0001145 
## F-statistic: 1.689 on 1 and 6015 DF,  p-value: 0.1938</code></pre>
<p>ä¸è¿‡ä¸æ˜¾è‘—ã€‚ã€‚ã€‚ä¸è¿‡ç³»æ•°ä¸Šçœ‹æ˜¯ä¸€ä¸ªè¾ƒä¸ºåˆç†çš„å­˜åœ¨ï¼ˆæ•ˆç‡ä¸Šå‡ï¼ŒæŠ‘åˆ¶å¤–å‡ºï¼‰ã€‚å¯¹äºä¸€ä¸ªæƒ³è¦çœ‹æ˜Ÿæ˜Ÿçš„reg monkeyæ¥è¯´æå…¶è‹¦æ¼ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ¢ä¸€ä¸ªå˜é‡ï¼šä¸€ç¯‡2016å¹´åœ¨ã€Šä¸­å›½å†œæ‘ç»æµã€‹çš„æ–‡ç« ç ”ç©¶â€œéå†œå°±ä¸šã€åœŸåœ°æµè½¬ä¸å†œä¸šç”Ÿäº§æ•ˆç‡å˜åŒ–â€åˆ©ç”¨çš„æ˜¯éå†œå°±ä¸šæ¥è€ƒå¯ŸåŠ³åŠ¨ç”Ÿäº§ç‡ï¼ˆåŒæ ·ä¹Ÿæ˜¯ç”¨å•ä½åœŸåœ°çš„å†œäº§å“æ”¶å…¥æ¥æµ‹ç®—ï¼‰å°±è¾ƒä¸ºæ˜¾è‘—ï¼Œä¸»è¦çš„å·®åˆ«åœ¨äºéå†œå°±ä¸šæ•°é‡æ¥æµ‹åº¦ï¼Œå¹¶éä¸€ä¸ªè™šæ‹Ÿå˜é‡ã€‚
è¿˜æœ‰ä¸€ä¸ªå¯èƒ½æ˜¯åœ¨å…ˆå‰çš„æ•°æ®å¤„ç†ä¸­å­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼Œæ¯”å¦‚æ˜¯å¦å°†æœªä»äº‹å†œä¸šæ´»åŠ¨çš„å®¶æˆ·è¿‡æ»¤è¿›æ¥ã€‚</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>cfps2010family<span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fid,familysize,<span class="fu">starts_with</span>(<span class="st">&quot;fu1_s&quot;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;fu1_s&quot;</span>)), <span class="fu">funs</span>(<span class="fu">replace</span>(., . <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;fu1_s&quot;</span>)), <span class="fu">funs</span>(<span class="fu">replace</span>(., . <span class="sc">&gt;=</span><span class="dv">1</span>, <span class="dv">1</span>)))<span class="ot">-&gt;</span>b1</span></code></pre></div>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## â„¹ Please use a list of either functions or lambdas:
## 
## # Simple named list: list(mean = mean, median = median)
## 
## # Auto named with `tibble::lst()`: tibble::lst(mean, median)
## 
## # Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<pre><code>## Warning: `funs()` was deprecated in dplyr 0.8.0.
## â„¹ Please use a list of either functions or lambdas:
## 
## # Simple named list: list(mean = mean, median = median)
## 
## # Auto named with `tibble::lst()`: tibble::lst(mean, median)
## 
## # Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
<p>å¹¶ä¸å»ºè®®ä¸€æ¬¡æ€§å°†æ‰€æœ‰å˜æ¢éƒ½åšå®Œï¼Œä¹‹åå†æ£€æŸ¥æ˜¯éå¸¸ç—›è‹¦çš„ã€‚ã€‚ã€‚</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>b1<span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mig =</span> <span class="fu">rowSums</span>(.[<span class="dv">3</span><span class="sc">:</span><span class="dv">14</span>]))<span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fid,familysize,mig)<span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mig_rate =</span> mig<span class="sc">/</span>familysize)<span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mig_rate<span class="sc">&lt;=</span><span class="dv">1</span><span class="sc">&amp;</span>mig_rate<span class="sc">&gt;=</span><span class="dv">0</span>)<span class="ot">-&gt;</span>b2<span class="co"># å‰”é™¤å¼‚å¸¸å€¼</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(b2<span class="sc">$</span>mig_rate))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(b2)</span></code></pre></div>
<pre><code>## [1] 14795     4</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>b3 <span class="ot">&lt;-</span> <span class="fu">merge</span>(a2,b2,<span class="at">by=</span><span class="st">&quot;fid&quot;</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>reg2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> b3,mig_rate<span class="sc">~</span>rates)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reg2)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mig_rate ~ rates, data = b3)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.1249 -0.1248 -0.1247  0.1251  0.8760 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.249e-01  2.384e-03   52.40   &lt;2e-16 ***
## rates       -2.029e-07  2.415e-07   -0.84    0.401    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.1834 on 6015 degrees of freedom
## Multiple R-squared:  0.0001174,  Adjusted R-squared:  -4.887e-05 
## F-statistic: 0.706 on 1 and 6015 DF,  p-value: 0.4008</code></pre>
<p>på€¼æ¯”ä¹‹å‰è¿˜æ›´å¤§äº†ã€‚ã€‚ã€‚ä¸Šè¿°æåˆ°çš„æ–‡ç« çš„æ ¸å¿ƒè§£é‡Šå˜é‡æ˜¯éå†œå å®¶åº­åŠ³åŠ¨åŠ›æ¯”ä¾‹ï¼Œä½†ç›®å‰è¿˜ä¸çŸ¥å’‹æ„å»ºçš„ã€‚ã€‚ã€‚æƒ³åˆ°äº†å†è¡¥ä¸Šå»ã€‚</p>
<!--chapter:end:01-land.Rmd-->
</div>
</div>
<div id="æ–‡çŒ®å¤åˆ»åŠ³åŠ¨åŠ›æµåŠ¨å¦‚ä½•å½±å“å†œæˆ·å€Ÿè´·" class="section level1 hasAnchor" number="2">
<h1 class="hasAnchor"><span class="header-section-number">2</span> æ–‡çŒ®å¤åˆ»ï¼šã€ŠåŠ³åŠ¨åŠ›æµåŠ¨å¦‚ä½•å½±å“å†œæˆ·å€Ÿè´·ã€‹<a href="#æ–‡çŒ®å¤åˆ»åŠ³åŠ¨åŠ›æµåŠ¨å¦‚ä½•å½±å“å†œæˆ·å€Ÿè´·" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Placeholder</p>
<div id="æ–‡çŒ®å›é¡¾" class="section level2 hasAnchor" number="2.1">
<h2 class="hasAnchor"><span class="header-section-number">2.1</span> æ–‡çŒ®å›é¡¾<a href="#æ–‡çŒ®å›é¡¾" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="æ•°æ®å¤„ç†" class="section level2 hasAnchor" number="2.2">
<h2 class="hasAnchor"><span class="header-section-number">2.2</span> æ•°æ®å¤„ç†<a href="#æ•°æ®å¤„ç†" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="ç»Ÿè®¡æè¿°" class="section level2 hasAnchor" number="2.3">
<h2 class="hasAnchor"><span class="header-section-number">2.3</span> ç»Ÿè®¡æè¿°<a href="#ç»Ÿè®¡æè¿°" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="æ¨¡å‹è®¾å®š" class="section level2 hasAnchor" number="2.4">
<h2 class="hasAnchor"><span class="header-section-number">2.4</span> æ¨¡å‹è®¾å®š<a href="#æ¨¡å‹è®¾å®š" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:02-rep-migration-loan.Rmd-->
</div>
</div>
<div id="culture" class="section level1 hasAnchor" number="3">
<h1 class="hasAnchor"><span class="header-section-number">3</span> å®—æ—æ–‡åŒ–<a href="#culture" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Placeholder</p>
<div id="æ•°æ®è½½å…¥" class="section level2 hasAnchor" number="3.1">
<h2 class="hasAnchor"><span class="header-section-number">3.1</span> æ•°æ®è½½å…¥<a href="#æ•°æ®è½½å…¥" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="å¯è§†åŒ–" class="section level2 hasAnchor" number="3.2">
<h2 class="hasAnchor"><span class="header-section-number">3.2</span> å¯è§†åŒ–<a href="#å¯è§†åŒ–" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="åœ°å›¾" class="section level2 hasAnchor" number="3.3">
<h2 class="hasAnchor"><span class="header-section-number">3.3</span> åœ°å›¾<a href="#åœ°å›¾" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="å…¶ä»–æ•°æ®æº" class="section level2 hasAnchor" number="3.4">
<h2 class="hasAnchor"><span class="header-section-number">3.4</span> å…¶ä»–æ•°æ®æº<a href="#å…¶ä»–æ•°æ®æº" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:03-clan.Rmd-->
</div>
</div>
<div id="charls" class="section level1 hasAnchor" number="4">
<h1 class="hasAnchor"><span class="header-section-number">4</span> CHARLS<a href="#charls" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Placeholder</p>
<div id="æ•°æ®å¯¼å…¥" class="section level2 hasAnchor" number="4.1">
<h2 class="hasAnchor"><span class="header-section-number">4.1</span> æ•°æ®å¯¼å…¥<a href="#æ•°æ®å¯¼å…¥" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:04-charls.Rmd-->
</div>
</div>
<div id="æ–‡çŒ®å¤åˆ»æ–°å‹å†œæ‘ç¤¾ä¼šå…»è€ä¿é™©æ”¿ç­–æ•ˆæœè¯„ä¼°" class="section level1 hasAnchor" number="5">
<h1 class="hasAnchor"><span class="header-section-number">5</span> æ–‡çŒ®å¤åˆ»ï¼šã€Šæ–°å‹å†œæ‘ç¤¾ä¼šå…»è€ä¿é™©æ”¿ç­–æ•ˆæœè¯„ä¼°ã€‹<a href="#æ–‡çŒ®å¤åˆ»æ–°å‹å†œæ‘ç¤¾ä¼šå…»è€ä¿é™©æ”¿ç­–æ•ˆæœè¯„ä¼°" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>è¿™ç¯‡æ–‡ç« æ˜¯ä½¿ç”¨æ–­ç‚¹å›å½’å’ŒDIDçš„æ–¹æ³•ï¼Œ</p>
<p>å®é™…ä¸Šæ˜¯åˆ©ç”¨é¢†å–å…»è€é‡‘çš„å¹´é¾„è§„åˆ™ï¼Œåªæœ‰å¹´æ»¡60å‘¨å²çš„å‚ä¿äººå‘˜æ‰èƒ½é¢†å–ï¼š</p>
<p><span class="math display">\[D_i= \begin{cases}1,z_i\ge 60,\\0,z_i&gt;60\end{cases}\]</span></p>
<p>å› å˜é‡ï¼šå®¶æˆ·æ€»æ”¶å…¥ã€å®¶æˆ·äººå‡æ”¶å…¥ã€ä¸ªäººæ”¶å…¥ã€ä¸ªäººéåŠ³åŠ¨æ”¶å…¥ï¼›</p>
<div id="æ•°æ®å¯¼å…¥-1" class="section level2 hasAnchor" number="5.1">
<h2 class="hasAnchor"><span class="header-section-number">5.1</span> æ•°æ®å¯¼å…¥<a href="#æ•°æ®å¯¼å…¥-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:05-rep-policy-insur.Rmd-->
</div>
</div>
<div id="chfs" class="section level1 hasAnchor" number="6">
<h1 class="hasAnchor"><span class="header-section-number">6</span> CHFS<a href="#chfs" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://chfs.swufe.edu.cn/">CHFS</a>æ˜¯è¥¿å—è´¢ç»å¤§å­¦ç»„ç»‡çš„ä¸­å›½å®¶åº­é‡‘èè°ƒæŸ¥</p>
<div id="æ•°æ®" class="section level2 hasAnchor" number="6.1">
<h2 class="hasAnchor"><span class="header-section-number">6.1</span> æ•°æ®<a href="#æ•°æ®" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:06-cfps.Rmd-->
</div>
</div>
<div id="å‚è€ƒæ–‡çŒ®" class="section level1 unnumbered hasAnchor">
<h1 class="unnumbered hasAnchor">å‚è€ƒæ–‡çŒ®<a href="#å‚è€ƒæ–‡çŒ®" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!--chapter:end:07-references.Rmd-->
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
